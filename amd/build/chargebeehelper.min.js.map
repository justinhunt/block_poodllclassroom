{"version":3,"sources":["../src/chargebeehelper.js"],"names":["define","$","log","ajax","chargebee","debug","instanceprops","changeplanclass","init","props","register_events","on","event","preventDefault","openCheckout","hostedPage","promises","call","methodname","args","loaded","console","error","close","success","hostedPageId","step","value"],"mappings":"AACAA,OAAM,yCAAC,CAAC,QAAD,CAAU,UAAV,CAAqB,WAArB,CAAiC,0CAAjC,CAAD,CAA+E,SAASC,CAAT,CAAYC,CAAZ,CAAiBC,CAAjB,CAAuBC,CAAvB,CAAkC,CAEnH,aACAF,CAAG,CAACG,KAAJ,CAAU,wBAAV,EAEA,MAAO,CAEHC,aAAa,CAAE,IAFZ,CAGHC,eAAe,CAAE,EAHd,CAMHC,IAAI,CAAE,cAASC,CAAT,CAAe,CACjBP,CAAG,CAACG,KAAJ,CAAUI,CAAV,EACA,KAAKH,aAAL,CAAmBG,CAAnB,CACA,KAAKF,eAAL,CAAqBE,CAAK,CAACF,eAA3B,CACA,KAAKG,eAAL,EAEH,CAZE,CAcHA,eAAe,CAAE,0BAAW,CACxBT,CAAC,CAAC,IAAM,KAAKM,eAAZ,CAAD,CAA8BI,EAA9B,CAAiC,OAAjC,CAA0C,UAAW,CACjDC,KAAK,CAACC,cAAN,GACAT,CAAS,CAACU,YAAV,CAAuB,CACnBC,UAAU,CAAE,qBAAW,CAMnB,GAAIC,CAAAA,CAAQ,CAAGb,CAAI,CAACc,IAAL,CAAU,CAAC,CACtBC,UAAU,CAAE,6CADU,CAEtBC,IAAI,CAAE,EAFgB,CAAD,CAAV,CAAf,CAIA,MAAOH,CAAAA,CAAQ,CAAC,CAAD,CAOlB,CAlBkB,CAmBnBI,MAAM,CAAE,iBAAW,CACfC,OAAO,CAACnB,GAAR,CAAY,iBAAZ,CACH,CArBkB,CAsBnBoB,KAAK,CAAE,gBAAW,CACjB,CAvBkB,CAwBnBC,KAAK,CAAE,gBAAW,CACdF,OAAO,CAACnB,GAAR,CAAY,iBAAZ,CACH,CA1BkB,CA2BnBsB,OAAO,CAAE,iBAASC,CAAT,CAAuB,CAC5BJ,OAAO,CAACnB,GAAR,CAAYuB,CAAZ,CAKH,CAjCkB,CAkCnBC,IAAI,CAAE,cAASC,CAAT,CAAgB,CAElBN,OAAO,CAACnB,GAAR,CAAYyB,CAAZ,CACH,CArCkB,CAAvB,CAuCH,CAzCD,CA0CH,CAzDE,CA2DV,CAhEK,CAAN","sourcesContent":["/* jshint ignore:start */\ndefine(['jquery','core/log','core/ajax','https://js.chargebee.com/v2/chargebee.js'], function($, log, ajax, chargebee) {\n\n    \"use strict\";\n    log.debug('cbhelper: initialising');\n\n    return {\n\n        instanceprops: null,\n        changeplanclass: '',\n\n        //pass in config, and register any events\n        init: function(props){\n            log.debug(props);\n            this.instanceprops=props;\n            this.changeplanclass=props.changeplanclass;\n            this.register_events();\n\n        },\n\n        register_events: function() {\n            $(\".\" + this.changeplanclass).on(\"click\", function() {\n                event.preventDefault();\n                chargebee.openCheckout({\n                    hostedPage: function() {\n                        // Hit your end point that returns hosted page object as response\n                        // This sample end point will call checkout new api\n                        // https://apidocs.chargebee.com/docs/api/hosted_pages#checkout_new_subscription\n                        // If you want to use paypal, go cardless and plaid, pass embed parameter as false\n                        // Now we can continue...\n                        var promises = ajax.call([{\n                            methodname: 'block_poodllclassroom_get_checkout_existing',\n                            args: {}\n                        }]);\n                        return promises[0];\n                       /*\n                        return $.ajax({\n                            method: \"post\",\n                            url: \"http://localhost:8000/api/generate_checkout_existing_url\"\n                        });\n                        */\n                    },\n                    loaded: function() {\n                        console.log(\"checkout opened\");\n                    },\n                    error: function() {\n                    },\n                    close: function() {\n                        console.log(\"checkout closed\");\n                    },\n                    success: function(hostedPageId) {\n                        console.log(hostedPageId);\n                        // Hosted page id will be unique token for the checkout that happened\n                        // You can pass this hosted page id to your backend\n                        // and then call our retrieve hosted page api to get subscription details\n                        // https://apidocs.chargebee.com/docs/api/hosted_pages#retrieve_a_hosted_page\n                    },\n                    step: function(value) {\n                        // value -> which step in checkout\n                        console.log(value);\n                    }\n                });\n            });\n        }\n    };//end of returned object\n});//total end\n\n"],"file":"chargebeehelper.min.js"}