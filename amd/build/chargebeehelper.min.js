define ("block_poodllclassroom/chargebeehelper",["jquery","core/log","core/ajax"],function(a,b,c){"use strict";b.debug("cbhelper: initialising");return{instanceprops:null,changeplanclass:"",siteprefix:"",controls:{},init:function init(a){this.instanceprops=a;this.changeplanclass=a.changeplanclass;this.siteprefix=a.siteprefix;this.gocbcheckoutclass=a.gocbcheckoutclass;this.gocbmanageclass=a.gocbmanageclass;this.registercontrols();this.registerevents()},registercontrols:function registercontrols(){this.controls.togglebutton=a("a.monthlyyearly");this.controls.monthlyplans=a("div.monthly");this.controls.yearlyplans=a("div.yearly")},registerevents:function registerevents(){var b=this;this.controls.togglebutton.on("click",function(){event.preventDefault();b.controls.monthlyplans.toggleClass("block_poodllclassroom_hidden");b.controls.yearlyplans.toggleClass("block_poodllclassroom_hidden")});a.getScript("https://js.chargebee.com/v2/chargebee.js",function(){var d=Chargebee.init({site:b.siteprefix});a("."+b.gocbcheckoutclass).on("click",function(){event.preventDefault();var b=this,e=a(this).data("currency"),f=a(this).data("billinginterval"),g=a(this).data("planid"),h=a(this).data("schoolid"),i=a(this).data("currentsubid"),j=a(this).data("method"),k={planid:g,schoolid:h,currentsubid:i};switch(j){case"get_checkout_new":k.currency=e;k.billinginterval=f;break;case"get_checkout_existing":default:}d.openCheckout({hostedPage:function hostedPage(){var a=c.call([{methodname:"block_poodllclassroom_"+j,args:k}]);return a[0]},loaded:function loaded(){console.log("checkout opened")},error:function error(){},close:function close(){console.log("checkout closed")},success:function success(a){console.log(a)},step:function step(a){console.log(a)}})});a("[data-cbaction='ssp']").on("click",function(){event.preventDefault();var b=this,e=a(this).data("upstreamownerid"),f=a(this).data("upstreamsubid");switch(a(this).data("type")){case"paymentsources":var g=Chargebee.getPortalSections().PAYMENT_SOURCES;break;case"billinghistory":var g=Chargebee.getPortalSections().BILLING_HISTORY;break;case"subdetails":var g=Chargebee.getPortalSections().SUBSCRIPTION_DETAILS;break;case"billingaccount":default:var g=!1;}d.setPortalSession(function(){var a=c.call([{methodname:"block_poodllclassroom_create_portal_session",args:{upstreamownerid:e}}]);return a[0]});var h=d.createChargebeePortal(),i={loaded:function loaded(){console.log("manage portal opened")},close:function close(){console.log("manage portal closed")},visit:function visit(){console.log("manage portal visit")},paymentSourceAdd:function paymentSourceAdd(){console.log("manage portal PSA")},paymentSourceUpdate:function paymentSourceUpdate(){console.log("manage portal PSU")},paymentSourceRemove:function paymentSourceRemove(){console.log("manage portal PSR")},subscriptionChanged:function subscriptionChanged(){console.log("manage portal sc")},subscriptionCustomFieldsChanged:function subscriptionCustomFieldsChanged(){console.log("manage portal scfc")},subscriptionCancelled:function subscriptionCancelled(){console.log("manage portal sub cancelled")},subscriptionPaused:function subscriptionPaused(){console.log("manage portal sub paused")},subscriptionPauseRemoved:function subscriptionPauseRemoved(){console.log("manage portal sub pause removed")},subscriptionResumed:function subscriptionResumed(){console.log("manage portal sub resumed")},subscriptionReactivated:function subscriptionReactivated(){console.log("manage portal sub reactivated")}};if(!1!==g){var j={sectionType:g,params:{subscriptionId:f}};h.openSection(j,i)}else{({sectionType:Chargebee.getPortalSections().ACCOUNT_DETAILS});h.open(i)}})})}}});
//# sourceMappingURL=chargebeehelper.min.js.map
